{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "node_exporter": { "type": "string", "description": "Router node exporter identifier" },
    "epoch_timestamp": { "type": "string", "description": "Node exporter metrics epoch timestamp" },
    "experiment_id": { "type": "string", "description": "Unique identifier for each experiment" },
    "interfaces": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Router interfaces to monitor"
    },
    "flag_debug_params": { "type": "boolean", "description": "Flag for showing or not debug parameters" },
    "debug_params": {
      "type": "object",
      "description": "Debug parameters to apply at the experiment",
      "properties": {
        "flag_original_metrics": { "type": "boolean", "description": "Flag for showing original node exporter metrics or not" },
        "max_throughput_mbps": { "type": "integer", "description": "Maximum bit rate for router's links [Mbps]" },
        "unit": { "type": "string", "description": "Unit for metrics values" },
        "polling_interval": { "type": "integer", "description": "Time between node exporter collector metrics requests [s]" },
        "test_metrics": { "type": "boolean", "description": "Flag for using manual test metrics in each router or not" },
        "multiplier": { "type": "integer", "description": "Multiplier applied to packet releated metrics values [1:2000]" },
        "collector_timestamp": { "type": "string", "description": "Telemetry Data Collector timestamp" },
        "process_timestamp": { "type": "string", "description": "Telemetry Processing timestamp" },
        "ml_timestamp": { "type": "string", "description": "Machine Learning Dummy timestamp" }
      },
      "required": ["flag_original_metrics", "max_throughput_mbps", "unit", "polling_interval", "test_metrics", "multiplier", "collector_timestamp", "process_timestamp", "ml_timestamp"]
    },
    "metrics": {
      "type": "array",
      "description": "Original node exporter metrics",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "enum": [
              "node_network_receive_bytes_total",
              "node_network_receive_packets_total"
            ]
          },
          "type": { "type": "string", "description": "Metric type" },
          "description": { "type": "string", "description": "Metric description" },
          "values": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "value": { "type": "string", "description": "Metric value" },
                "labels": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": { "type": "string" },
                      "value": { "type": "string", "description": "Interfaces monitored for each metric" }
                    },
                    "required": ["name", "value"]
                  }
                }
              },
              "required": ["value", "labels"]
            }
          }
        },
        "required": ["name", "description", "type", "values"]
      }
    },
    "input_ml_metrics": {
      "type": "array",
      "description": "Aggregated metrics for power consumption calculus",
      "items": {
        "type": "object",
        "properties": {
          "node_network_receive_packets_total_rate": {
            "type": "object",
            "description": "Interface aggregated packet rate from node_network_receive_packets_total metric."
          },
          "node_network_average_received_packet_length": {
            "type": "object",
            "description": "Interface aggregated average packet length (bytes/packets)."
          },
          "node_network_router_capacity_occupation": {
            "type": "object",
            "description": "Interface aggregated node capacity occupation."
          }
        },
        "required": [
          "node_network_receive_packets_total_rate",
          "node_network_average_received_packet_length",
          "node_network_router_capacity_occupation"
        ]
      }
    },
    "output_ml_metrics": {
      "type": "array",
      "description": "Power consumption metrics generated by ML dummy.",
      "items": {
        "type": "object",
        "properties": {
          "node_network_power_consumption_wats": {
            "type": "object",
            "description": "Router power consumption in Wats."
          },
          "node_network_power_consumption_variation_rate_occupation": {
            "type": "object",
            "description": "Router power consumption variation rate over node occupation."
          },
          "node_network_power_consumption_variation_rate_packet_length": {
            "type": "object",
            "description": "Router power consumption variation rate over packet length."
          }
        },
        "required": [
          "node_network_power_consumption_wats",
          "node_network_power_consumption_variation_rate_occupation",
          "node_network_power_consumption_variation_rate_packet_length"
        ]
      }
    }
  },
  "required": [
    "node_exporter",
    "epoch_timestamp",
    "experiment_id",
    "interfaces",
    "flag_debug_params",
    "debug_params",
    "metrics",
    "input_ml_metrics",
    "output_ml_metrics"
  ]
}
